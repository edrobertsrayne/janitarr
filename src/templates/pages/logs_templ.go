// Code generated by templ - DO NOT EDIT.

// templ: version: v0.3.977
package pages

//lint:file-ignore SA4006 This context is only used if a nested component is present.

import "github.com/a-h/templ"
import templruntime "github.com/a-h/templ/runtime"

import (
	"github.com/edrobertsrayne/janitarr/src/logger"
	"github.com/edrobertsrayne/janitarr/src/templates/components"
	"github.com/edrobertsrayne/janitarr/src/templates/layouts"
)

func Logs(logs []logger.LogEntry) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var1 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var1 == nil {
			templ_7745c5c3_Var1 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Var2 := templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
			templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
			templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
			if !templ_7745c5c3_IsBuffer {
				defer func() {
					templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
					if templ_7745c5c3_Err == nil {
						templ_7745c5c3_Err = templ_7745c5c3_BufErr
					}
				}()
			}
			ctx = templ.InitializeContext(ctx)
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 1, "<div class=\"max-w-7xl mx-auto\"><div class=\"mb-6 flex justify-between items-center\"><h1 class=\"text-3xl font-bold\">Activity Logs</h1><div class=\"flex gap-2\"><a href=\"/api/logs/export?format=json\" download class=\"btn btn-ghost btn-sm\">Export JSON</a> <a href=\"/api/logs/export?format=csv\" download class=\"btn btn-ghost btn-sm\">Export CSV</a> <button hx-delete=\"/api/logs\" hx-confirm=\"Are you sure you want to clear all logs?\" hx-target=\"#log-container\" hx-swap=\"innerHTML\" class=\"btn btn-error btn-sm\">Clear Logs</button></div></div><!-- Filter toolbar --><div class=\"card bg-base-100 shadow mb-6\"><div class=\"card-body p-4\"><!-- Search input row --><div class=\"mb-4\"><label for=\"search-filter\" class=\"label\"><span class=\"label-text text-sm\">Search Messages</span></label> <input type=\"text\" id=\"search-filter\" name=\"search\" placeholder=\"Search log messages...\" hx-get=\"/partials/log-entries\" hx-target=\"#log-entries\" hx-swap=\"innerHTML\" hx-include=\".log-filter\" hx-trigger=\"keyup changed delay:500ms\" class=\"log-filter input input-bordered input-sm w-full\"></div><div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-4\"><div><label for=\"type-filter\" class=\"label\"><span class=\"label-text text-sm\">Type</span></label> <select id=\"type-filter\" name=\"type\" hx-get=\"/partials/log-entries\" hx-target=\"#log-entries\" hx-swap=\"innerHTML\" hx-include=\".log-filter\" class=\"log-filter select select-bordered select-sm w-full\"><option value=\"\">All Types</option> <option value=\"cycle_start\">Cycle Start</option> <option value=\"cycle_end\">Cycle End</option> <option value=\"detection\">Detection</option> <option value=\"search\">Search</option> <option value=\"error\">Error</option></select></div><div><label for=\"server-filter\" class=\"label\"><span class=\"label-text text-sm\">Server</span></label> <select id=\"server-filter\" name=\"server\" hx-get=\"/partials/log-entries\" hx-target=\"#log-entries\" hx-swap=\"innerHTML\" hx-include=\".log-filter\" class=\"log-filter select select-bordered select-sm w-full\"><option value=\"\">All Servers</option></select></div><div><label for=\"operation-filter\" class=\"label\"><span class=\"label-text text-sm\">Operation</span></label> <select id=\"operation-filter\" name=\"operation\" hx-get=\"/partials/log-entries\" hx-target=\"#log-entries\" hx-swap=\"innerHTML\" hx-include=\".log-filter\" class=\"log-filter select select-bordered select-sm w-full\"><option value=\"\">All Operations</option> <option value=\"search\">Search</option> <option value=\"automation_cycle\">Automation Cycle</option> <option value=\"connection\">Connection</option> <option value=\"system\">System</option></select></div><div><label for=\"from-date\" class=\"label\"><span class=\"label-text text-sm\">From Date</span></label> <input type=\"datetime-local\" id=\"from-date\" name=\"from\" hx-get=\"/partials/log-entries\" hx-target=\"#log-entries\" hx-swap=\"innerHTML\" hx-include=\".log-filter\" hx-trigger=\"change\" class=\"log-filter input input-bordered input-sm w-full\"></div><div><label for=\"to-date\" class=\"label\"><span class=\"label-text text-sm\">To Date</span></label> <input type=\"datetime-local\" id=\"to-date\" name=\"to\" hx-get=\"/partials/log-entries\" hx-target=\"#log-entries\" hx-swap=\"innerHTML\" hx-include=\".log-filter\" hx-trigger=\"change\" class=\"log-filter input input-bordered input-sm w-full\"></div></div><div class=\"flex gap-2\"><button hx-get=\"/partials/log-entries\" hx-target=\"#log-entries\" hx-swap=\"innerHTML\" hx-include=\".log-filter\" class=\"btn btn-primary btn-sm\">Apply Filters</button> <button onclick=\"document.querySelectorAll('.log-filter').forEach(el => el.value = ''); htmx.trigger('#type-filter', 'change');\" class=\"btn btn-ghost btn-sm\">Clear Filters</button></div></div></div><!-- Logs container with WebSocket integration --><div class=\"card bg-base-100 shadow\" id=\"log-container\" hx-ext=\"ws\" ws-connect=\"/ws/logs\">")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			if len(logs) == 0 {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 2, "<div class=\"p-12 text-center\"><svg class=\"mx-auto h-12 w-12 text-base-content/30\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"></path></svg><h3 class=\"mt-2 text-lg font-semibold\">No logs</h3><p class=\"mt-1 text-base-content/60\">No activity has been logged yet.</p></div>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			} else {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 3, "<div id=\"log-entries\">")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				for _, entry := range logs {
					templ_7745c5c3_Err = components.LogEntry(entry).Render(ctx, templ_7745c5c3_Buffer)
					if templ_7745c5c3_Err != nil {
						return templ_7745c5c3_Err
					}
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 4, "</div><!-- Infinite scroll trigger --> <div hx-get=\"")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var3 string
				templ_7745c5c3_Var3, templ_7745c5c3_Err = templ.JoinStringErrs("/partials/log-entries?offset=" + string(rune(len(logs))))
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `src/templates/pages/logs.templ`, Line: 178, Col: 72}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var3))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 5, "\" hx-trigger=\"revealed\" hx-swap=\"afterend\" class=\"p-4 text-center text-sm text-base-content/60\">Loading more...</div>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 6, "</div></div><!-- WebSocket script for real-time updates --> <script>\n\t\t\t// Listen for WebSocket messages and prepend new log entries\n\t\t\thtmx.on(\"htmx:wsAfterMessage\", function(evt) {\n\t\t\t\tconst logContainer = document.getElementById(\"log-entries\");\n\t\t\t\tif (logContainer && evt.detail.message) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst data = JSON.parse(evt.detail.message);\n\t\t\t\t\t\tif (data.type === \"log\" && data.data) {\n\t\t\t\t\t\t\t// Prepend new log entry to the top\n\t\t\t\t\t\t\tconst entry = data.data;\n\t\t\t\t\t\t\t// You would need to render the LogEntry component here\n\t\t\t\t\t\t\t// For simplicity, we'll just trigger a refresh\n\t\t\t\t\t\t\thtmx.trigger(logContainer, \"htmx:afterSwap\");\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tconsole.error(\"Failed to parse WebSocket message:\", e);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t</script>")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			return nil
		})
		templ_7745c5c3_Err = layouts.Base("Activity Logs").Render(templ.WithChildren(ctx, templ_7745c5c3_Var2), templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

var _ = templruntime.GeneratedTemplate
